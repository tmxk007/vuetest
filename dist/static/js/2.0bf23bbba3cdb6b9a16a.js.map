{"version":3,"sources":["webpack:///static/js/2.0bf23bbba3cdb6b9a16a.js","webpack:///./src/test/table.vue","webpack:///table.vue","webpack:///./src/test/table.vue?46f4"],"names":["webpackJsonp","325","module","exports","__webpack_require__","Component","331","__webpack_exports__","getData","params","columns","query","$Linq","allData","sortColumn","order","OrderByDescending","r","OrderBy","searchData","searchType","searchContent","data","ToArray","count","length","getPageData","pageNumber","pageSize","Where","i","c","String","field","indexOf","ordinarySearchData","advancedSearchData","checkItemFilter","groupFilter","items","checkGroupFilter","row","connector","item","isTrue","fieldValue","searchValue","value","search","type","Date","parseInt","format","operatorOperation","operator","getRandomNum","min","max","range","rand","Math","random","round","Object","defineProperty","departs","push","code","name","depart","date","options","height","showHeader","title","visible","sortable","label","events","onLoadData","$table","setData","351","render","_vm","this","_h","$createElement","_self","_c","attrs","staticRenderFns"],"mappings":"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","file":"static/js/2.0bf23bbba3cdb6b9a16a.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 325:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(47)(\n  /* script */\n  __webpack_require__(331),\n  /* template */\n  __webpack_require__(351),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 331:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\nvar allData = getAllData();\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  data: function data() {\n    return {\n      options: {\n        height: 300,\n        showHeader: true,\n        columns: [{\n          field: \"code\",\n          title: \"编码\",\n          visible: true,\n          sortable: true,\n          search: {\n            type: \"input\"\n          }\n        }, {\n          field: \"name\",\n          title: \"名称\",\n          visible: true,\n          sortable: true,\n          search: {\n            type: \"input\"\n          }\n        }, {\n          field: \"depart\",\n          title: \"部门\",\n          visible: true,\n          sortable: true,\n          search: {\n            type: \"combo\",\n            data: [{ label: \"市场部\", value: \"市场部\" }, { label: \"开发部\", value: \"开发部\" }, { label: \"实施部\", value: \"实施部\" }, { label: \"行政部\", value: \"行政部\" }, { label: \"运维部\", value: \"运维部\" }]\n          }\n        }, {\n          field: \"date\",\n          title: \"日期\",\n          visible: true,\n          sortable: true,\n          search: {\n            type: \"date\"\n          }\n        }],\n\n        events: {\n          onLoadData: function onLoadData($table, params) {\n            var columns = $table.columns;\n            $table.setData(getData(params, columns));\n          }\n        }\n      }\n    };\n  }\n});\n\nfunction getAllData() {\n  var data = [];\n  var departs = [\"市场部\", \"开发部\", \"实施部\", \"行政部\", \"运维部\"];\n  for (var i = 1; i <= 1000; i++) {\n    data.push({\n      code: i,\n      name: \"张\" + i,\n      depart: departs[getRandomNum(0, departs.length - 1)],\n      date: new Date().format(\"yyyy-MM-dd\")\n    });\n  }\n  return data;\n}\n\nfunction getData(params, columns) {\n  var query = $Linq(allData);\n\n  if (params.sortColumn) {\n    if (params.order == \"descending\") {\n      query = query.OrderByDescending(function (r) {\n        return r[params.sortColumn];\n      });\n    } else {\n      query = query.OrderBy(function (r) {\n        return r[params.sortColumn];\n      });\n    }\n  }\n\n  query = searchData(query, columns, params.searchType, params.searchContent);\n\n  var data = query.ToArray();\n\n  var result = {\n    count: data.length,\n    data: data.getPageData(params.pageNumber, params.pageSize)\n  };\n  return result;\n}\n\nfunction searchData(query, columns, searchType, searchContent) {\n  if (searchType == -1 || !searchContent) return query;\n\n  if (searchType == 0) {\n    query = query.Where(function (r) {\n      for (var i = 0; i < columns.length; i++) {\n        var c = columns[i];\n        var value = String(r[c.field]);\n        var isContain = value.indexOf(searchContent) > -1;\n        if (isContain) return true;\n      }\n      return false;\n    });\n  } else if (searchType == 1) {\n    query = ordinarySearchData(query, searchContent);\n  } else if (searchType == 2) {\n    query = advancedSearchData(query, searchContent);\n  }\n  return query;\n}\n\nfunction ordinarySearchData(query, searchContent) {\n  query = query.Where(function (r) {\n    for (var i = 0; i < searchContent.length; i++) {\n      var item = searchContent[i];\n      var isTrue = checkItemFilter(r, item);\n      if (!isTrue) return false;\n    }\n    return true;\n  });\n  return query;\n}\n\nfunction advancedSearchData(query, searchContent) {\n  query = query.Where(function (r) {\n    for (var i = 0; i < searchContent.length; i++) {\n      var groupFilter = searchContent[i];\n      if (!groupFilter.items || groupFilter.items.length == 0) continue;\n\n      var isTrue = checkGroupFilter(r, groupFilter);\n      if (!isTrue) return false;\n    }\n    return true;\n  });\n  return query;\n}\n\nfunction checkGroupFilter(row, groupFilter) {\n  var connector = groupFilter.connector;\n  var items = groupFilter.items;\n  for (var i = 0; i < items.length; i++) {\n    var item = items[i];\n    var isTrue = checkItemFilter(row, item);\n    if (connector == \"and\" && !isTrue) {\n      return false;\n    }\n    if (connector == \"or\" && isTrue) {\n      return true;\n    }\n  }\n  return connector == \"and\";\n}\n\nfunction checkItemFilter(row, item) {\n  var fieldValue = row[item.field];\n  var searchValue = item.value;\n  if (item.search.type == \"date\") {\n    if (typeof fieldValue == \"string\") fieldValue = new Date(fieldValue);\n    fieldValue = parseInt(fieldValue.format(\"yyyyMMdd\"));\n    searchValue = parseInt(searchValue.format(\"yyyyMMdd\"));\n  }\n\n  return operatorOperation(item.operator, fieldValue, searchValue);\n}\n\nfunction operatorOperation(operator, value, searchValue) {\n  if (operator == \"=\") {\n    return value == searchValue;\n  } else if (operator == \"<>\") {\n    return value != searchValue;\n  } else if (operator == \"exists\") {\n    return String(value).indexOf(searchValue) > -1;\n  } else if (operator == \">\") {\n    return value > searchValue;\n  } else if (operator == \">=\") {\n    return value >= searchValue;\n  } else if (operator == \"<\") {\n    return value < searchValue;\n  } else if (operator == \"<=\") {\n    return value <= searchValue;\n  }\n}\n\nfunction getRandomNum(min, max) {\n  var range = max - min;\n  var rand = Math.random();\n  return min + Math.round(rand * range);\n}\n\n/***/ }),\n\n/***/ 351:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('ep-table', {\n    attrs: {\n      \"options\": _vm.options\n    }\n  })\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/2.0bf23bbba3cdb6b9a16a.js","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./table.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-67f34681\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./table.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/test/table.vue\n// module id = 325\n// module chunks = 2","<template>\r\n  <ep-table :options=\"options\"></ep-table>\r\n</template>\r\n\r\n<script>\r\nvar allData = getAllData();\r\nexport default {\r\n  data() {\r\n    return {\r\n      options: {\r\n        height: 300,\r\n        showHeader: true,\r\n        columns: [\r\n          {\r\n            field: \"code\",\r\n            title: \"编码\",\r\n            visible: true,\r\n            sortable: true,\r\n            search: {\r\n              type: \"input\"\r\n            }\r\n          },\r\n          {\r\n            field: \"name\",\r\n            title: \"名称\",\r\n            visible: true,\r\n            sortable: true,\r\n            search: {\r\n              type: \"input\"\r\n            }\r\n          },\r\n          {\r\n            field: \"depart\",\r\n            title: \"部门\",\r\n            visible: true,\r\n            sortable: true,\r\n            search: {\r\n              type: \"combo\",\r\n              data: [\r\n                { label: \"市场部\", value: \"市场部\" },\r\n                { label: \"开发部\", value: \"开发部\" },\r\n                { label: \"实施部\", value: \"实施部\" },\r\n                { label: \"行政部\", value: \"行政部\" },\r\n                { label: \"运维部\", value: \"运维部\" }\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            field: \"date\",\r\n            title: \"日期\",\r\n            visible: true,\r\n            sortable: true,\r\n            search: {\r\n              type: \"date\"\r\n            }\r\n          }\r\n        ],\r\n        // 事件\r\n        events: {\r\n          // 加载数据\r\n          onLoadData($table, params) {\r\n            var columns = $table.columns;\r\n            $table.setData(getData(params, columns));\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }\r\n};\r\n\r\nfunction getAllData() {\r\n  var data = [];\r\n  var departs = [\"市场部\", \"开发部\", \"实施部\", \"行政部\", \"运维部\"];\r\n  for (var i = 1; i <= 1000; i++) {\r\n    data.push({\r\n      code: i,\r\n      name: \"张\" + i,\r\n      depart: departs[getRandomNum(0, departs.length - 1)],\r\n      date: new Date().format(\"yyyy-MM-dd\")\r\n    });\r\n  }\r\n  return data;\r\n}\r\n\r\nfunction getData(params, columns) {\r\n  var query = $Linq(allData);\r\n  // 排序\r\n  if (params.sortColumn) {\r\n    if (params.order == \"descending\") {\r\n      query = query.OrderByDescending(function(r) {\r\n        return r[params.sortColumn];\r\n      });\r\n    } else {\r\n      query = query.OrderBy(function(r) {\r\n        return r[params.sortColumn];\r\n      });\r\n    }\r\n  }\r\n  // 搜索数据\r\n  query = searchData(query, columns, params.searchType, params.searchContent);\r\n  // var count = allData.length;\r\n  var data = query.ToArray();\r\n  // 分页\r\n  var result = {\r\n    count: data.length,\r\n    data: data.getPageData(params.pageNumber, params.pageSize)\r\n  };\r\n  return result;\r\n}\r\n\r\n// 搜索数据\r\nfunction searchData(query, columns, searchType, searchContent) {\r\n  if (searchType == -1 || !searchContent) return query;\r\n\r\n  if (searchType == 0) {\r\n    // 默认筛选【仅一个搜索文本框，输入的搜索内容，对所有字段进行模糊匹配】\r\n    query = query.Where(function(r) {\r\n      for (var i = 0; i < columns.length; i++) {\r\n        var c = columns[i];\r\n        var value = String(r[c.field]);\r\n        var isContain = value.indexOf(searchContent) > -1;\r\n        if (isContain) return true;\r\n      }\r\n      return false;\r\n    });\r\n  } else if (searchType == 1) {\r\n    // 普通筛选【筛选条件之间的关系是and】\r\n    query = ordinarySearchData(query, searchContent);\r\n  } else if (searchType == 2) {\r\n    // 高级筛选【组与组之间的关系是and；组内关系可能是and或or，由用户指定连接符】\r\n    query = advancedSearchData(query, searchContent);\r\n  }\r\n  return query;\r\n}\r\n\r\n// 普通筛选\r\nfunction ordinarySearchData(query, searchContent) {\r\n  query = query.Where(function(r) {\r\n    for (var i = 0; i < searchContent.length; i++) {\r\n      var item = searchContent[i];\r\n      var isTrue = checkItemFilter(r, item);\r\n      if (!isTrue) return false;\r\n    }\r\n    return true;\r\n  });\r\n  return query;\r\n}\r\n\r\n// 高级筛选\r\nfunction advancedSearchData(query, searchContent) {\r\n  query = query.Where(function(r) {\r\n    for (var i = 0; i < searchContent.length; i++) {\r\n      var groupFilter = searchContent[i];\r\n      if (!groupFilter.items || groupFilter.items.length == 0) continue;\r\n\r\n      var isTrue = checkGroupFilter(r, groupFilter);\r\n      if (!isTrue) return false;\r\n    }\r\n    return true;\r\n  });\r\n  return query;\r\n}\r\n\r\n// 判断组条件\r\nfunction checkGroupFilter(row, groupFilter) {\r\n  // 连接符【and or】\r\n  var connector = groupFilter.connector;\r\n  var items = groupFilter.items;\r\n  for (var i = 0; i < items.length; i++) {\r\n    var item = items[i];\r\n    var isTrue = checkItemFilter(row, item);\r\n    if (connector == \"and\" && !isTrue) {\r\n      return false;\r\n    }\r\n    if (connector == \"or\" && isTrue) {\r\n      return true;\r\n    }\r\n  }\r\n  return connector == \"and\";\r\n}\r\n\r\n// 判断条件项\r\nfunction checkItemFilter(row, item) {\r\n  var fieldValue = row[item.field];\r\n  var searchValue = item.value;\r\n  if (item.search.type == \"date\") {\r\n    if (typeof fieldValue == \"string\") fieldValue = new Date(fieldValue);\r\n    fieldValue = parseInt(fieldValue.format(\"yyyyMMdd\"));\r\n    searchValue = parseInt(searchValue.format(\"yyyyMMdd\"));\r\n  }\r\n  // 运算符运算\r\n  return operatorOperation(item.operator, fieldValue, searchValue);\r\n}\r\n\r\n// 运算符运算\r\nfunction operatorOperation(operator, value, searchValue) {\r\n  if (operator == \"=\") {\r\n    return value == searchValue;\r\n  } else if (operator == \"<>\") {\r\n    return value != searchValue;\r\n  } else if (operator == \"exists\") {\r\n    return String(value).indexOf(searchValue) > -1;\r\n  } else if (operator == \">\") {\r\n    return value > searchValue;\r\n  } else if (operator == \">=\") {\r\n    return value >= searchValue;\r\n  } else if (operator == \"<\") {\r\n    return value < searchValue;\r\n  } else if (operator == \"<=\") {\r\n    return value <= searchValue;\r\n  }\r\n}\r\n\r\nfunction getRandomNum(min, max) {\r\n  var range = max - min;\r\n  var rand = Math.random();\r\n  return min + Math.round(rand * range);\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// table.vue?524a2d68","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('ep-table', {\n    attrs: {\n      \"options\": _vm.options\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-67f34681\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./src/test/table.vue\n// module id = 351\n// module chunks = 2"],"sourceRoot":""}